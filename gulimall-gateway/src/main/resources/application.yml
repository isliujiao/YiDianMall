spring:
  cloud:
    gateway:
      routes:
        # gulimall-productå•†å“æœåŠ¡
        - id: product_route
          uri: lb://gulimall-product #è®¾ç½®è·¯ç”±çš„uri
          predicates:
            - Path=/api/product/**  #è®¾ç½®è·¯ç”±æ–­è¨€
          filters:
            - RewritePath=/api/(?<segment>.*),/$\{segment}  #è®¾ç½®è½¬å‘è·¯å¾„ï¼Ÿ

        - id: coupon_route
          uri: lb://gulimall-coupon
          predicates:
            - Path=/api/coupon/**
          filters:
            - RewritePath=/api/(?<segment>/?.*),/$\{segment}

        # gulimall-member ä¼šå‘˜ç³»ç»Ÿ
        - id: member_route
          uri: lb://gulimall-member #è®¾ç½®è·¯ç”±çš„uri
          predicates:
            - Path=/api/member/**  #è®¾ç½®è·¯ç”±æ–­è¨€
          filters:
            - RewritePath=/api/(?<segment>.*),/$\{segment}  #è®¾ç½®è½¬å‘è·¯å¾„ï¼Ÿ

        # gulimall-ware åº“å­˜ç³»ç»Ÿ
        - id: ware_route
          uri: lb://gulimall-ware #è®¾ç½®è·¯ç”±çš„uri
          predicates:
            - Path=/api/ware/**  #è®¾ç½®è·¯ç”±æ–­è¨€
          filters:
            - RewritePath=/api/(?<segment>.*),/$\{segment}  #è®¾ç½®è½¬å‘è·¯å¾„ï¼Ÿ

        # gulimall-third-partyç¬¬ä¸‰æ–¹æœåŠ¡
        - id: third_party_route
          uri: lb://gulimall-third-party #è®¾ç½®è·¯ç”±çš„uri
          predicates:
            - Path=/api/thirdparty/**  #è®¾ç½®è·¯ç”±æ–­è¨€
          filters:
            - RewritePath=/api/thirdparty/(?<segment>.*),/$\{segment}  #è®¾ç½®è½¬å‘è·¯å¾„ï¼Ÿ

        # æ˜ å°„å‰ç«¯è·¯å¾„ï¼ˆ/api/**ï¼‰----å°†ä»¥ä¸Šæ²¡æœ‰åŒ¹é…åˆ°çš„äº¤ç»™renren-fastè¿›è¡ŒåŒ¹é…
        - id: admin_route   #è®¾ç½®è·¯ç”±çš„uri
          uri: lb://renren-fast #è®¾ç½®è·¯ç”±çš„uri
          predicates:
            - Path=/api/**  #è®¾ç½®è·¯ç”±æ–­è¨€
          filters:
            - RewritePath=/api/(?<segment>.*),/renren-fast/$\{segment}  #è®¾ç½®è½¬å‘è·¯å¾„ï¼Ÿ - id: admin_route   #è®¾ç½®è·¯ç”±çš„uri

#===============ğŸ‘†â†‘å‰ç«¯æ˜ å°„=================ğŸ‘‡â†“nginx=============================

        # nginx è½¬å‘åˆ°ç½‘å…³ï¼Œç½‘å…³è¿›è¡Œé…ç½®è½¬å‘åˆ°æœåŠ¡
        #è®¿é—®gulimall.com ä»£ç†åˆ° è™šæ‹Ÿæœºã€è™šæ‹Ÿæœºçš„nginxæ¥æ”¶ã€ä»£ç†ç»™ ç½‘å…³ã€ç½‘å…³è½¬å‘åˆ°æœåŠ¡
        #1.å•†å“æœåŠ¡
        - id: gulimall_host_route   #è®¾ç½®è·¯ç”±çš„uri
          uri: lb://gulimall-product #è®¾ç½®è·¯ç”±çš„uri
          predicates:
            - Host=gulimall.com,item.gulimall.com

        #2.æ£€ç´¢æœåŠ¡ï¼Œå°†nginxçš„gulimallåŸŸåè½¬ç»™gulimall-searchæœåŠ¡
        - id: gulimall_search_route
          uri: lb://gulimall-search
          predicates:
            - Host=search.gulimall.com

        #3.è®¤è¯æœåŠ¡ï¼Œå°†nginxçš„gulimallåŸŸåè½¬ç»™gulimall-searchæœåŠ¡
        - id: gulimall-auth-server_route
          uri: lb://gulimall-auth-server
          predicates:
            - Host=auth.gulimall.com

        #4.è´­ç‰©è½¦æœåŠ¡
        - id: gulimall_cart_route
          uri: lb://gulimall-cart
          predicates:
            - Host=cart.gulimall.com

        #5.è®¢å•æœåŠ¡
        - id: gulimall_order_route
          uri: lb://gulimall-order
          predicates:
            - Host=order.gulimall.com

        #6.ä¼šå‘˜æœåŠ¡
        - id: gulimall_member_route
          uri: lb://gulimall-member
          predicates:
            - Host=member.gulimall.com

        #7.ç§’æ€æœåŠ¡
        - id: gulimall_seckill_route
          uri: lb://gulimall-seckill
          predicates:
            - Host=seckill.gulimall.com
